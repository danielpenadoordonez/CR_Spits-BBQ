// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

//* Solamente mapeo unas tablas de momento, me falta añadirles las relaciones para luego migrar
//* Atte: Mario

model Perfil {
  id          Int    @id
  descripcion String
}

model Usuario {
  id            String        @id //* Corresponde  a la cédula
  nombre        String
  apellido1     String
  apellido2     String
  correo        String //* Email
  username      String
  clave         String //* Contraseña, no sé si usará MD5
  telefono      String
  perfil        String //? ESTO QUÉ ES?
  direccion     String? //* Opcional
  reservaciones Reservacion[]

  @@unique([correo, username, telefono])
}

model Mesero {
  id         String   @id //* Cédula
  Sucursal   Sucursal @relation(fields: [idSucursal], references: [id])
  idSucursal BigInt
}

model Sucursal {
  id            BigInt        @id //* Nombre de la sursal
  codigo        String //? Pienso que debería tener código
  nombre        String //? Igualmente un nombre
  ubicacion     String
  capacidad     BigInt
  meseros       Mesero[]
  mesas         Mesa[]
  reservaciones Reservacion[]

  @@unique([codigo, nombre])
}

model Mesa {
  id             BigInt  @id @default(autoincrement()) //* Identity
  codigo         String  @unique
  capacidad      Int
  disponibilidad Boolean //* Reservada o libre
  estado         Boolean //* Buena o mala?

  Sucursal   Sucursal @relation(fields: [idSucursal], references: [id])
  idSucursal BigInt
}

model Reservacion {
  id         BigInt   @id @default(autoincrement())
  fecha_hora DateTime @default(now())
  Sucursal   Sucursal @relation(fields: [idSucursal], references: [id])
  idSucursal BigInt
  Usuario    Usuario  @relation(fields: [idUsuario], references: [id])
  idUsuario  String
}

model Categoria_Producto {
  id          Int        @id
  descripcion String     @unique
  productos   Producto[]
}

model Producto {
  id                 BigInt             @id
  nombre             String
  descripcion        String
  ingredientes       String? //* Opcional
  precio             Decimal
  estado             Int //* creo que puede tener varios estados... sino cambiar a bool
  Categoria_Producto Categoria_Producto @relation(fields: [idCategoria], references: [id])
  idCategoria        Int
}

model TipoTarjeta {
  id          Int     @id
  descripcion String  @unique
  estado      Boolean //* Habilitada / Deshabilitada
}
